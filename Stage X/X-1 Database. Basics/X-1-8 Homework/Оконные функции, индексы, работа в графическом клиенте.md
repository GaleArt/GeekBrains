          Базы данных. Основы
      Оконные функции, индексы, работа в графическом клиенте

      ДОМАШНЕЕ ЗАДАНИЕ:
    Работаем с базой данных учителей teachers.db. Для каждого задания надо сдать только код, который
выполняется для получения результата, в текстовом файле.
1. Создайте представление, которое для каждого курса выводит название, номер последнего
потока, дату начала обучения последнего потока и среднюю успеваемость курса по всем потокам.
2. Удалите из базы данных всю информацию, которая относится к преподавателю с
идентификатором, равным 3. Используйте транзакцию.
3. Создайте триггер для таблицы успеваемости, который проверяет значение успеваемости на
соответствие диапазону чисел от 0 до 5 включительно.
4. Дополнительное задание. Создайте триггер для таблицы потоков, который проверяет, что
дата начала потока больше текущей даты, а номер потока имеет наибольшее значение среди
существующих номеров. При невыполнении условий необходимо вызвать ошибку с информативным сообщением.


Комментарии к домашкам:
      Homework X-1-2
    Кирилл Иванов (Наставник)
Таблицы есть, первичные ключи есть, внешние ключи есть. Всё на месте.
Хорошо, что не забыли про составной первичный ключ в таблице успеваемоти студентов.
Здорово, что придерживаетесь принятого в SQL стиля оформления кода (зарезервированные слова в верхнем регистре, форматирование кода...)!
Комплексный список рекомендаций по оформлению SQL-кода можно найти, например, тут: https://www.sqlstyle.guide/ru/ .
Хорошо, что заполнили таблицы данными, но по заданию этого не требовалось.
      Homework X-1-3
    Кирилл Иванов (Наставник)
Обе команды ALTER TABLE есть. Все хорошо.
Вставку нескольких записей лучше делать пакетной (одной командной вставлять несколько строк). Это положительно влияет на производительность.
SQL-код принято оформлять в текстовых файлах (скриптах) с расширением *.sql
Официальная документация по команде ALTER TABLE в SQLite: https://www.sqlite.org/lang_altertable.html
      Homework X-1-5
    Кирилл Иванов (наставник)
Вложенные во вложенные запросы работают неэффективно (медленно). Лучше стараться избегать таких конструкций.
Весь текст, кроме SQL-кода, в присылаемых скриптах лучше сразу оформлять внутри комментариев, чтобы сам скрипт
можно было запустить целиком без дополнительного редактирования. Так в целом принято в индустрии.
  https://zametkinapolyah.ru/zametki-o-mysql/chast-2-1-sql-kommentarii-v-bazax-dannyx-sqlite.html
Тема вложенных запросов и объединения UNION усвоена.
      Homework X-1-6
    Кирилл Иванов (наставник)
Псевдонимы для имен таблиц - удобная фича. Ее можно использовать также с ключевым словом AS после имени таблицы в запросе. Это сокращает текст запроса и улучшает его читабельность.
Хорошо, что смогли обойтись без вложенных запросов. Не у всех это получилось.
Есть смысл внутреннее объединение таблиц всегда записывать в полном синтаксисе (INNER JOIN вместо JOIN). Так код становится более очевидным.
      Homework X-1-7
    Кирилл Иванов (наставник)
Обратите внимание, что Ваш триггер будет срабатывать только на событие вставки данных. Но данные можно изменить и путем обновления существующей строки. На этот случай нужно писать еще один триггер на соответствующее событие.
Перед созданием представления для лучшей отказоустойчивости кода есть смысл проверить: нет ли в БД уже представления с таким именем и удалить его. Это можно реализовать конструкцией DROP VIEW IF EXISTS… https://www.sqlitetutorial.net/sqlite-drop-view/
Правильно, что внутри транзакции не забыли удалить данные из разных таблиц, а не только из одной.
Для более продвинутого управления транзакциями можно использовать SAVEPOINT. Если есть интерес, можете ознакомиться по ссылке: https://www.sqlite.org/lang_savepoint.html
